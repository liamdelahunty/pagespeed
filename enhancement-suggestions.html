
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhancement Suggestions</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            background-color: #f9f9f9;
        }
        h1, h2, h3 {
            border-bottom: 2px solid #eee;
            padding-bottom: 0.3em;
        }
        h1 {
             color: #111;
        }
        h2 {
            color: #111;
            margin-top: 2.5rem;
        }
        h3 {
            color: #111;
            margin-top: 1.5rem;
        }
        code {
            background-color: #eee;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        }
        ul {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 0;
        }
        li {
            margin-bottom: 0.5rem;
        }
        a {
            color: #0366d6;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        p {
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <h1>Recommended Enhancements and New Features</h1>
<p>This document outlines a series of recommended enhancements and potential new reporting features for the PageSpeed Insights collection and analysis toolset.</p>
<h2>‚ö°Ô∏è Recommended Enhancements</h2>
<p>These improvements focus on making the existing toolkit more robust, maintainable, and easier to use.</p>
<p><strong>Centralised Configuration</strong></p>
<ul>
<li><strong>Problem</strong>: Key settings like API endpoints, directory paths (<code>reports/</code>, <code>debug-responses/</code>), and test parameters (e.g., <code>timeout</code>) are duplicated across multiple scripts. This makes configuration changes tedious and error-prone.</li>
<li><strong>Recommendation</strong>: Create a central configuration file (e.g., <code>config.ini</code> or <code>config.json</code>) to store all shared settings. Each script would then load its configuration from this single source, simplifying management.</li>
</ul>
<p><strong>Unified Reporting Script</strong></p>
<ul>
<li><strong>Problem</strong>: The three reporting scripts (<code>compare_reports.py</code>, <code>generate_html_report.py</code>, <code>generate_summary_report.py</code>) share a significant amount of boilerplate code for finding, parsing, and processing the JSON data.</li>
<li><strong>Recommendation</strong>: Refactor these into a single, powerful reporting script. This script could use sub-commands to generate the different report types, for example:
        - <code>python reporter.py compare --url &lt;url&gt;</code>
        - <code>python reporter.py history --url &lt;url&gt; --period 28d</code>
        - <code>python reporter.py summary --from-file &lt;file&gt;</code></li>
<li><strong>Benefit</strong>: This would drastically reduce code duplication and make future updates to data handling logic much easier.</li>
</ul>
<p><strong>Add Interaction to Next Paint (INP) Metric</strong> (Completed)</p>
<ul>
<li><s><strong>Context</strong>: Interaction to Next Paint (INP) is a Core Web Vitals metric that has officially replaced First Input Delay (FID).</s></li>
<li><s><strong>Recommendation</strong>: Update the metric extraction logic in all relevant scripts (<code>pagespeed_to_csv.py</code>, <code>compare_reports.py</code>, etc.) to capture and display the INP metric from the API results. This ensures the reports align with the latest web performance standards.</s></li>
</ul>
<p><strong>Implement Automated Backups</strong></p>
<ul>
<li><strong>Problem</strong>: The <code>organise_reports.py</code> script modifies files in place. While it has safety checks, a bug could lead to data loss. The script's documentation mentions a backup feature that is not implemented.</li>
<li><strong>Recommendation</strong>: Implement a function in <code>organise_reports.py</code> that creates a <code>.zip</code> backup of the <code>debug-responses</code> directory before any renaming operations begin.</li>
</ul>
<p><strong>Refine CSV Data Collection</strong> (Completed)</p>
<ul>
<li><s><strong>Problem</strong>: The CSV file generated by <code>pagespeed_to_csv.py</code> contains a <code>Device</code> column (e.g., "Desktop", "Mobile") and a <code>Strategy</code> column (e.g., "desktop", "mobile"). This is redundant information.</s></li>
<li><s><strong>Recommendation</strong>: Remove the <code>Device</code> column. The <code>Strategy</code> column is sufficient and is the term used by the API. This would slightly simplify the data structure.</s></li>
</ul>
<p><strong>Structured Logging</strong></p>
<ul>
<li><strong>Problem</strong>: The scripts currently print status messages, warnings, and errors directly to the console. This is sufficient for manual runs but makes automated execution and debugging difficult.</li>
<li><strong>Recommendation</strong>: Integrate Python's built-in <code>logging</code> module. This would allow for:
        - Writing logs to a file (e.g., <code>pagespeed-runs.log</code>).
        - Setting different log levels (e.g., run silently but log all errors).
        - Standardising the format of log messages with timestamps.</li>
</ul>
<p><strong>Update:</strong> The new <code>retention.py</code> script implements structured logging, writing its output to <code>retention.log</code>. This is a good first step towards implementing this for all scripts.</p>
<h2>üìä New Reporting Options</h2>
<p>These are ideas for new features and report types that would add significant value and provide deeper insights.</p>
<ul>
<li><strong>Threshold-Based Alerting</strong>
    - <strong>Concept</strong>: A new script that runs after data collection and checks the latest results against configurable thresholds.
    - <strong>Feature</strong>: If a key metric (e.g., Performance score) for an important URL drops below a defined value, the script could automatically trigger a notification via email or a webhook to a service like Slack or Microsoft Teams. This would enable a proactive approach to performance monitoring.</li>
<li><strong>Core Web Vitals (CWV) Report</strong>
    - <strong>Concept</strong>: A dedicated report focusing exclusively on the Core Web Vitals (LCP, CLS, INP).
    - <strong>Feature</strong>: This report would display the values for these three metrics and use Google's "Good / Needs Improvement / Poor" thresholds to clearly label the performance of each URL. It would provide a very clear, high-level health check.</li>
<li><strong>Competitor Analysis Report</strong>
    - <strong>Concept</strong>: A report designed to compare your primary websites against a list of known competitors.
    - <strong>Feature</strong>: The user would provide two lists of URLs (internal and competitor). The report would generate side-by-side tables and charts, making it easy to benchmark performance against the competition.</li>
<li><strong>Interactive Web Dashboard</strong>
    - <strong>Concept</strong>: A more advanced and user-friendly way to explore the data.
    - <strong>Feature</strong>: Using a simple web framework like <strong>Dash</strong> or <strong>Flask</strong>, create a local web application that provides an interactive dashboard. Users could:
        - Select URLs from a dropdown menu.
        - Choose custom date ranges.
        - Select which metrics to plot.
    - This would empower non-technical users to explore the data without needing to run scripts from the command line.</li>
<li><strong>Export Data from HTML Reports</strong>
    - <strong>Concept</strong>: Allow users to extract the data from a generated HTML report.
    - <strong>Feature</strong>: Add a "Download as CSV" button to the HTML reports. This would use a small amount of JavaScript to convert the data in the report's tables into a CSV file that the user can save for further analysis in Excel or other tools.</li>
</ul>